{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.232.1"},"children":{"MusicBoxAuthStack":{"id":"MusicBoxAuthStack","path":"MusicBoxAuthStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"MusicBoxUserPool":{"id":"MusicBoxUserPool","path":"MusicBoxAuthStack/MusicBoxUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxAuthStack/MusicBoxUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":true,"required":true}],"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"music-box-users","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"MusicBoxUserPoolClient":{"id":"MusicBoxUserPoolClient","path":"MusicBoxAuthStack/MusicBoxUserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxAuthStack/MusicBoxUserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile"],"callbackUrLs":["https://example.com"],"clientName":"music-box-web-client","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"MusicBoxUserPoolC432F199"}}}}}},"UserPoolId":{"id":"UserPoolId","path":"MusicBoxAuthStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"MusicBoxAuthStack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CognitoRegion":{"id":"CognitoRegion","path":"MusicBoxAuthStack/CognitoRegion","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"MusicBoxAuthStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"MusicBoxAuthStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"Exports":{"id":"Exports","path":"MusicBoxAuthStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Output{\"Ref\":\"MusicBoxUserPoolC432F199\"}":{"id":"Output{\"Ref\":\"MusicBoxUserPoolC432F199\"}","path":"MusicBoxAuthStack/Exports/Output{\"Ref\":\"MusicBoxUserPoolC432F199\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"MusicBoxUserPoolClient8F098B2E\"}":{"id":"Output{\"Ref\":\"MusicBoxUserPoolClient8F098B2E\"}","path":"MusicBoxAuthStack/Exports/Output{\"Ref\":\"MusicBoxUserPoolClient8F098B2E\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MusicBoxAuthStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MusicBoxAuthStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"MusicBoxDataStack":{"id":"MusicBoxDataStack","path":"MusicBoxDataStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"UsersTable":{"id":"UsersTable","path":"MusicBoxDataStack/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxDataStack/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"userId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"music-box-users"}}},"ScalingRole":{"id":"ScalingRole","path":"MusicBoxDataStack/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"FavoritesTable":{"id":"FavoritesTable","path":"MusicBoxDataStack/FavoritesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxDataStack/FavoritesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"},{"attributeName":"songId","attributeType":"S"},{"attributeName":"addedAt","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"userId-addedAt-index","keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"addedAt","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"userId","keyType":"HASH"},{"attributeName":"songId","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"music-box-favorites"}}},"ScalingRole":{"id":"ScalingRole","path":"MusicBoxDataStack/FavoritesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"UsersTableName":{"id":"UsersTableName","path":"MusicBoxDataStack/UsersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"UsersTableArn":{"id":"UsersTableArn","path":"MusicBoxDataStack/UsersTableArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"FavoritesTableName":{"id":"FavoritesTableName","path":"MusicBoxDataStack/FavoritesTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"FavoritesTableArn":{"id":"FavoritesTableArn","path":"MusicBoxDataStack/FavoritesTableArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"MusicBoxDataStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"MusicBoxDataStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"Exports":{"id":"Exports","path":"MusicBoxDataStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Output{\"Fn::GetAtt\":[\"UsersTable9725E9C8\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UsersTable9725E9C8\",\"Arn\"]}","path":"MusicBoxDataStack/Exports/Output{\"Fn::GetAtt\":[\"UsersTable9725E9C8\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"FavoritesTable4DA8A306\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"FavoritesTable4DA8A306\",\"Arn\"]}","path":"MusicBoxDataStack/Exports/Output{\"Fn::GetAtt\":[\"FavoritesTable4DA8A306\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"UsersTable9725E9C8\"}":{"id":"Output{\"Ref\":\"UsersTable9725E9C8\"}","path":"MusicBoxDataStack/Exports/Output{\"Ref\":\"UsersTable9725E9C8\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"FavoritesTable4DA8A306\"}":{"id":"Output{\"Ref\":\"FavoritesTable4DA8A306\"}","path":"MusicBoxDataStack/Exports/Output{\"Ref\":\"FavoritesTable4DA8A306\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MusicBoxDataStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MusicBoxDataStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"MusicBoxApiStack":{"id":"MusicBoxApiStack","path":"MusicBoxApiStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"ApiFunction":{"id":"ApiFunction","path":"MusicBoxApiStack/ApiFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"MusicBoxApiStack/ApiFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"MusicBoxApiStack/ApiFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"MusicBoxApiStack/ApiFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"MusicBoxApiStack/ApiFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxApiStack/ApiFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"MusicBoxDataStack:ExportsOutputFnGetAttFavoritesTable4DA8A306Arn72D98149"},{"Fn::ImportValue":"MusicBoxDataStack:ExportsOutputFnGetAttUsersTable9725E9C8Arn5684EF99"},{"Fn::Join":["",[{"Fn::ImportValue":"MusicBoxDataStack:ExportsOutputFnGetAttFavoritesTable4DA8A306Arn72D98149"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ApiFunctionServiceRoleDefaultPolicy20A32B8D","roles":[{"Ref":"ApiFunctionServiceRole52B9747B"}]}}}}}}},"Code":{"id":"Code","path":"MusicBoxApiStack/ApiFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"MusicBoxApiStack/ApiFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"MusicBoxApiStack/ApiFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"MusicBoxApiStack/ApiFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-194722397974-us-east-1","s3Key":"41ea855e2e3c80aa8181f666bb4ac76b2c2a948ab7777e56a4577aa2e04c2c1e.zip"},"environment":{"variables":{"NODE_ENV":"production","COGNITO_USER_POOL_ID":{"Fn::ImportValue":"MusicBoxAuthStack:ExportsOutputRefMusicBoxUserPoolC432F1998A0DE2D3"},"COGNITO_REGION":"us-east-1","USERS_TABLE":{"Fn::ImportValue":"MusicBoxDataStack:ExportsOutputRefUsersTable9725E9C857961836"},"FAVORITES_TABLE":{"Fn::ImportValue":"MusicBoxDataStack:ExportsOutputRefFavoritesTable4DA8A306EDA1F1EE"},"API_KEY":"MusicBoxApiStack","APPLE_MUSIC_TEAM_ID":"","APPLE_MUSIC_KEY_ID":"","APPLE_MUSIC_PRIVATE_KEY":""}},"functionName":"music-box-api","handler":"dist/main.handler","memorySize":512,"role":{"Fn::GetAtt":["ApiFunctionServiceRole52B9747B","Arn"]},"runtime":"nodejs20.x","timeout":30}}}}},"MusicBoxApi":{"id":"MusicBoxApi","path":"MusicBoxApiStack/MusicBoxApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxApiStack/MusicBoxApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["Content-Type","Authorization","x-api-key"],"allowMethods":["GET","POST","DELETE","OPTIONS"],"allowOrigins":["*"],"maxAge":3600},"description":"Music Box API Gateway","name":"music-box-api","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"MusicBoxApiStack/MusicBoxApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxApiStack/MusicBoxApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MusicBoxApi8B31C1A1"},"autoDeploy":true,"stageName":"$default"}}}}},"ANY--{proxy+}":{"id":"ANY--{proxy+}","path":"MusicBoxApiStack/MusicBoxApi/ANY--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.232.1","metadata":[]},"children":{"LambdaIntegration":{"id":"LambdaIntegration","path":"MusicBoxApiStack/MusicBoxApi/ANY--{proxy+}/LambdaIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxApiStack/MusicBoxApi/ANY--{proxy+}/LambdaIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MusicBoxApi8B31C1A1"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"payloadFormatVersion":"2.0"}}}}},"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"MusicBoxApiStack/MusicBoxApi/ANY--{proxy+}/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:194722397974:",{"Ref":"MusicBoxApi8B31C1A1"},"/*/*/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"MusicBoxApiStack/MusicBoxApi/ANY--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MusicBoxApi8B31C1A1"},"authorizationType":"NONE","routeKey":"ANY /{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"MusicBoxApiANYproxyLambdaIntegrationFDC51450"}]]}}}}}},"GET--health":{"id":"GET--health","path":"MusicBoxApiStack/MusicBoxApi/GET--health","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.232.1","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"MusicBoxApiStack/MusicBoxApi/GET--health/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ApiFunctionCE271BD4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:194722397974:",{"Ref":"MusicBoxApi8B31C1A1"},"/*/*/health"]]}}}},"Resource":{"id":"Resource","path":"MusicBoxApiStack/MusicBoxApi/GET--health/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"MusicBoxApi8B31C1A1"},"authorizationType":"NONE","routeKey":"GET /health","target":{"Fn::Join":["",["integrations/",{"Ref":"MusicBoxApiANYproxyLambdaIntegrationFDC51450"}]]}}}}}}}},"ApiEndpoint":{"id":"ApiEndpoint","path":"MusicBoxApiStack/ApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"ApiKey":{"id":"ApiKey","path":"MusicBoxApiStack/ApiKey","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"LambdaFunctionName":{"id":"LambdaFunctionName","path":"MusicBoxApiStack/LambdaFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"MusicBoxApiStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"MusicBoxApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"Exports":{"id":"Exports","path":"MusicBoxApiStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Output{\"Fn::GetAtt\":[\"MusicBoxApi8B31C1A1\",\"ApiEndpoint\"]}":{"id":"Output{\"Fn::GetAtt\":[\"MusicBoxApi8B31C1A1\",\"ApiEndpoint\"]}","path":"MusicBoxApiStack/Exports/Output{\"Fn::GetAtt\":[\"MusicBoxApi8B31C1A1\",\"ApiEndpoint\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MusicBoxApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MusicBoxApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"MusicBoxWebStack":{"id":"MusicBoxWebStack","path":"MusicBoxWebStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"WebsiteBucket":{"id":"WebsiteBucket","path":"MusicBoxWebStack/WebsiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxWebStack/WebsiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"music-box-web-194722397974-us-east-1","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"MusicBoxWebStack/WebsiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxWebStack/WebsiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebsiteBucket75C24D94"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebsiteBucket75C24D94","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"MusicBoxWebStack/WebsiteBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.232.1","metadata":[]},"children":{"Default":{"id":"Default","path":"MusicBoxWebStack/WebsiteBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"MusicBoxWebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.232.1"},"children":{"Staging":{"id":"Staging","path":"MusicBoxWebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"Role":{"id":"Role","path":"MusicBoxWebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}},"Handler":{"id":"Handler","path":"MusicBoxWebStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"OAC":{"id":"OAC","path":"MusicBoxWebStack/OAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"MusicBoxWebStack/OAC/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"music-box-oac","signingBehavior":"no-override","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}},"Distribution":{"id":"Distribution","path":"MusicBoxWebStack/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.232.1","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"MusicBoxWebStack/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}},"Resource":{"id":"Resource","path":"MusicBoxWebStack/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebsiteBucket75C24D94","RegionalDomainName"]},"id":"MusicBoxWebStackDistributionOrigin12306808A","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["OAC5B452445","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"MusicBoxWebStackDistributionOrigin12306808A","allowedMethods":["GET","HEAD","OPTIONS"],"cachedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":300,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100"}}}}}},"DistributionUrl":{"id":"DistributionUrl","path":"MusicBoxWebStack/DistributionUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"DistributionId":{"id":"DistributionId","path":"MusicBoxWebStack/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"BucketName":{"id":"BucketName","path":"MusicBoxWebStack/BucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"FrontendEnvVars":{"id":"FrontendEnvVars","path":"MusicBoxWebStack/FrontendEnvVars","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"MusicBoxWebStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"MusicBoxWebStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"MusicBoxWebStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"MusicBoxWebStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}}}}}